# Validation Report: v1.2.1 Bug Fixes

**Date**: 2026-02-03
**Version**: 1.2.1
**Status**: PASSED

## Summary

Fixes two bugs reported during testing:
1. clockwork-orange installing from broken dev build instead of stable release
2. atuin not found by zsh or bash shells

## Changes Made

### 1. clockwork-orange Tagged Release Support

**Problem**: `Get-GitHubReleaseAsset` was fetching "latest" release which contained dev builds (114 commits past tag).

**Fix**:
- Added `-Tag` parameter to `Get-GitHubReleaseAsset` function in common.ps1
- Added `tag` field to download-urls.json for clockwork-orange (pinned to v2.7.3)
- Updated clockwork-orange module to read tag from config and use it
- Simplified upgrade logic - always overwrites exe on fresh install

**Files changed**:
- `lib/common.ps1`: Added Tag parameter to Get-GitHubReleaseAsset
- `configs/download-urls.json`: Added tag field for clockwork-orange
- `modules/clockwork-orange.ps1`: Uses pinned tag, simplified overwrite logic

### 2. Atuin PATH Fix

**Problem**: Atuin installed via winget wasn't being found because:
- WinGet doesn't always create shims in WinGet/Links
- Atuin may be installed to package-specific folder or cargo bin

**Fix**:
- Added `$HOME/.cargo/bin` to PATH for cargo-installed Rust tools
- Added loop to find atuin in WinGet package directories
- Applied to both .bashrc and .zshrc

**Files changed**:
- `configs/shell/.bashrc`: Added cargo bin and winget package search
- `configs/shell/.zshrc`: Added cargo bin and winget package search

## Phase 3: Code Review

| File | Change | Status |
|------|--------|--------|
| lib/common.ps1 | Added -Tag param to Get-GitHubReleaseAsset | PASSED |
| configs/download-urls.json | Added tag: "v2.7.3" for clockwork-orange | PASSED |
| modules/clockwork-orange.ps1 | Uses tag from config, simplified overwrite | PASSED |
| configs/shell/.bashrc | Added cargo bin and atuin package search | PASSED |
| configs/shell/.zshrc | Added cargo bin and atuin package search | PASSED |
| README.md | Updated changelog and version to 1.2.1 | PASSED |

## Phase 4: Code Quality

- Dead code: None found
- Duplication: Shell config changes are consistent between .bashrc and .zshrc
- **Status**: PASSED

## Phase 5: Security Review

- No new security concerns
- Path additions are user-local directories only
- **Status**: PASSED

## Testing Notes

To test on Windows VM:

**clockwork-orange**:
```powershell
# Remove existing broken build
.\uninstall.ps1 -Components clockwork-orange -Force
# Reinstall from pinned tag
.\install.ps1 -Components clockwork-orange
# Verify version
clockwork-orange --version
```

**atuin**:
```bash
# In MSYS2/zsh
echo $PATH | tr ':' '\n' | grep -i atuin
which atuin
atuin --version
```

## Overall

- All gates passed: YES
- Ready for testing: YES
